(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{6047:function(e,t,a){Promise.resolve().then(a.bind(a,6016))},6016:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(6687),s=a(4670),i=a(8648),o=a(7437),c=a(2265),r=a(4033),l=function(e){var t=e.movie,a=(0,r.useRouter)();return(0,o.jsxs)("div",{className:"singleCardDataShow p-2 text-white rounded-md hover:cursor-pointer hover:bg-gray-700",onClick:function(){a.push("/movies/".concat(t._id))},children:[""!=t.poster?(0,o.jsx)("img",{src:"http://192.168.29.110:3000/uploads/"+t.poster}):(0,o.jsx)("img",{src:"http://192.168.29.110:3000/uploads/no-img.jpg"}),(0,o.jsx)("h1",{className:"text-2xl font-bold mt-2",children:t.title}),(0,o.jsx)("p",{className:"text-slate-300",children:t.description}),(0,o.jsx)("p",{className:"text-slate-400 my-2",children:t.publishing_year})]})},u=a(1396),d=a.n(u),m=a(2410),p=a(311),h=a(9436),g=a(2173);function x(){var e,t=(0,s._)((0,c.useState)([]),2),a=t[0],u=t[1],x=(0,s._)((0,c.useState)(!1),2),v=x[0],f=x[1],j=(0,r.useRouter)(),N=(0,s._)((0,c.useState)(1),2),_=N[0],S=N[1],w=(0,s._)((0,c.useState)(0),2),C=w[0],b=w[1],k=(0,s._)((0,c.useState)(0),2),y=k[0],D=k[1],I=(e=(0,n._)(function(){var e,t,a;return(0,i.Jh)(this,function(n){return t=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):"",(a=new FormData).append("page",_),a.append("action","get-all"),a.append("page_count",8),g.Z.post("/api/movies",a,{headers:{Authorization:"Bearer ".concat(null===(e=t)||void 0===e?void 0:e.token)}}).then(function(e){u(e.data.data),b(e.data.total_count),D(e.data.pageSize),f(!0)}).catch(function(e){401==e.response.status&&(localStorage.setItem("userData",""),j.push("/"))}),g.Z.post("/api/movies",a).then(function(e){u(e.data.data),b(e.data.total_count),f(!0)}).catch(function(e){}),[2]})}),function(){return e.apply(this,arguments)}),P=function(){localStorage.setItem("userData",""),j.push("/")},E=function(){(localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")):"")||j.push("/")};return(0,c.useEffect)(function(){I()},[_]),(0,c.useEffect)(function(){E()},[]),(0,o.jsxs)(o.Fragment,{children:[a.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"container movieShowContainer",children:[(0,o.jsx)("nav",{className:"pt-5 pb-3",children:(0,o.jsxs)("div",{className:"px-10 md:px-0 mx-auto flex justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-4xl font-bold",children:"My Movies"}),(0,o.jsx)(d(),{href:"/movies/new",children:(0,o.jsx)(m.zUF,{className:"d-inline-block h1 ml-2"})})]}),(0,o.jsx)("div",{onClick:function(){return P()},children:(0,o.jsxs)("button",{children:["Logout ",(0,o.jsx)(p.pGv,{className:"d-inline-block ml-3"})]})})]})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"d-flex flex-wrap gap-lg-5 gap-md-1 gap-sm-6",children:a.map(function(e){return(0,o.jsx)(l,{movie:e},e._id)})})}),!0==v&&C>y&&a.length>0&&(0,o.jsx)("div",{className:"Pagination-static",children:(0,o.jsx)(h.Z,{activePage:_,itemsCountPerPage:y,totalItemsCount:C,pageRangeDisplayed:y,onChange:function(e){console.log("active page is ".concat(e)),S(e)},itemClass:"page-item",linkClass:"page-link",innerClass:"pagination justify-content-center",activeLinkClass:"active",nextPageText:"Next",prevPageText:"Prev"})})]}),(0,o.jsx)("div",{className:"moviesCardBottomImage",children:(0,o.jsx)("img",{src:"./Vector2.png",width:"100%"})})]}),!0==v&&0==a.length&&(0,o.jsxs)("div",{className:"movieShowContainer",children:[(0,o.jsxs)("div",{className:"HomePage",children:[(0,o.jsx)("h1",{children:"Your movie list is empty"}),(0,o.jsx)("span",{className:"newMoviebtn fw-bold",onClick:function(){j.push("/movies/new")},children:"Add a new movie"})]}),(0,o.jsx)("div",{className:"bottomImage",children:(0,o.jsx)("img",{src:"./Vector2.png",width:"100%"})})]})]})}}},function(e){e.O(0,[787,400,630,42,971,596,744],function(){return e(e.s=6047)}),_N_E=e.O()}]);